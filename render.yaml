services:
  - type: web
    name: wyze-pulse
    runtime: node
    plan: free
    region: oregon
    branch: main
    autoDeploy: true
    buildCommand: corepack enable && corepack prepare pnpm@10.29.2 --activate && pnpm install --frozen-lockfile --prod=false && pnpm build
    # Use npm for runtime start (always available), even though we build/install with pnpm.
    startCommand: NODE_ENV=production npm run start -- -p $PORT -H 0.0.0.0
    healthCheckPath: /
    envVars:
      - key: TIMEZONE
        value: America/Los_Angeles
      - key: DATA_CONNECTORS
        value: sample

      # Optional (only needed if you enable non-sample connectors)
      - key: OPENAI_API_KEY
        sync: false
      - key: RSS_FEEDS
        sync: false
      - key: REDDIT_CLIENT_ID
        sync: false
      - key: REDDIT_CLIENT_SECRET
        sync: false
      - key: REDDIT_REFRESH_TOKEN
        sync: false
      - key: REDDIT_QUERY
        sync: false
      - key: REDDIT_SUBREDDITS
        sync: false
